---
import HeaderLink from "./HeaderLink.astro"
import { SITE_TITLE } from '../consts';
---

<header class={`header`}>
	<div class="header-container">
	  <a href="/" class="header__logo" aria-label="back to home">
		<svg viewBox="0 0 421.19 238.39" fill="#fff">
		  <g>
			<g>
			  <path
				class="st0"
				d="M328.33,142.38l-31-46.72c15.83-4.78,27.39-19.49,27.39-36.85V38.49C324.72,17.27,307.45,0,286.22,0h-87.01
		  v142.38h34.82V97.3h22.6l29.91,45.08H328.33z M234.03,34.82h52.19c2.02,0,3.67,1.65,3.67,3.67v20.32c0,2.02-1.65,3.67-3.67,3.67
		  h-52.19V34.82z"
			  />
			  <g>
				<path
				  class="st0"
				  d="M153.82,142.38h-24.33c-20.19,0-36.62-16.43-36.62-36.62v-15.9h34.82v15.9c0,1,0.81,1.81,1.81,1.81h24.33
			  c1,0,1.81-0.81,1.81-1.81V34.82h-32.91V0h67.73v105.75C190.44,125.95,174.01,142.38,153.82,142.38z"
				/>
			  </g>
			</g>
			<g>
			  <path
				class="st0"
				d="M45.48,221.62l7.8-52.11h11.15l-3.59,23.99l-7.76,43.64H37.95l-5.73-34.91l-5.69,34.91H11.39l-7.8-43.72
		  L0,169.51h11.12l7.8,52.11l7.8-52.11h10.96L45.48,221.62z"
			  />
			  <path
				class="st0"
				d="M71.06,169.51h28.63v9.59H82.1v19.38h15.13v9.67H82.1v19.35h17.59v9.63H71.06V169.51z"
			  />
			  <path
				class="st0"
				d="M107.88,169.51h17.01c9.8,0,14.7,4.75,14.7,14.24v10.14c0,4.45-2.02,7.59-6.05,9.44
		  c4.03,1.85,6.05,4.98,6.05,9.4v10.22c0,9.44-5.14,14.17-15.41,14.2h-16.3V169.51z M118.92,179.1v19.38h3.47
		  c1.53,0,2.59-0.09,3.16-0.27c2-0.7,3-2.14,3-4.33v-10.14c0-3.09-1.6-4.64-4.8-4.64H118.92z M118.92,208.16v19.35h4.84
		  c3.2,0,4.8-1.52,4.8-4.56v-10.22c0-2.16-1-3.58-3-4.25c-0.57-0.21-1.63-0.31-3.16-0.31H118.92z"
			  />
			  <path
				class="st0"
				d="M168.38,169.51h17.01c9.8,0,14.7,4.75,14.7,14.24v39.2c0,9.44-5.14,14.17-15.41,14.2h-16.3V169.51z
		   M179.41,179.1v48.4h4.84c3.2,0,4.8-1.52,4.8-4.56v-39.2c0-3.09-1.6-4.64-4.8-4.64H179.41z"
			  />
			  <path
				class="st0"
				d="M209.45,169.51h28.63v9.59h-17.59v19.38h15.13v9.67h-15.13v19.35h17.59v9.63h-28.63V169.51z"
			  />
			  <path
				class="st0"
				d="M245.48,182.77c0-9.46,5.28-14.2,15.84-14.2c10.58,0,15.87,4.73,15.87,14.2v9.09h-11.04v-9.09
		  c0-3.04-1.6-4.56-4.8-4.56h-0.08c-3.17,0-4.76,1.52-4.76,4.56v6.12c0,3.02,3.44,6.71,10.34,11.08
		  c6.89,4.34,10.34,9.56,10.34,15.64v8.54c0,9.49-5.28,14.24-15.83,14.24c-10.58-0.03-15.87-4.77-15.87-14.24v-9.09h11.04v9.09
		  c0,3.04,1.61,4.56,4.84,4.56c3.2,0,4.8-1.52,4.8-4.56v-7.72c0-3.28-3.45-7.1-10.34-11.47c-6.89-4.34-10.34-9.62-10.34-15.83
		  V182.77z"
			  />
			  <path
				class="st0"
				d="M286.75,169.51h11.04v67.63h-11.04V169.51z"
			  />
			  <path
				class="st0"
				d="M339.05,224.15c0,9.47-5.29,14.21-15.87,14.24c-10.56,0-15.84-4.75-15.84-14.24v-41.38
		  c0-9.46,5.28-14.2,15.84-14.2c10.58,0,15.87,4.73,15.87,14.2v9.09h-11.04v-9.09c0-3.04-1.6-4.56-4.8-4.56h-0.08
		  c-3.17,0-4.76,1.52-4.76,4.56v41.38c0,3.04,1.6,4.56,4.8,4.56c3.22,0,4.84-1.52,4.84-4.56v-15.87h-4.8v-9.63h15.83V224.15z"
			  />
			  <path
				class="st0"
				d="M348.41,169.51h11.04l10.45,39.24v-39.24h10.22v67.63h-11.04l-10.06-37.99v37.99h-10.61V169.51z"
			  />
			  <path
				class="st0"
				d="M389.48,182.77c0-9.46,5.28-14.2,15.84-14.2c10.58,0,15.87,4.73,15.87,14.2v9.09h-11.04v-9.09
		  c0-3.04-1.6-4.56-4.8-4.56h-0.08c-3.17,0-4.76,1.52-4.76,4.56v6.12c0,3.02,3.44,6.71,10.34,11.08
		  c6.89,4.34,10.34,9.56,10.34,15.64v8.54c0,9.49-5.28,14.24-15.84,14.24c-10.58-0.03-15.87-4.77-15.87-14.24v-9.09h11.04v9.09
		  c0,3.04,1.61,4.56,4.84,4.56c3.2,0,4.8-1.52,4.8-4.56v-7.72c0-3.28-3.44-7.1-10.33-11.47c-6.89-4.34-10.34-9.62-10.34-15.83
		  V182.77z"
			  />
			</g>
		  </g>
		</svg>
	  </a>
	  <nav class="nav" role="navigation">
		<button
		  class="toggle"
		  aria-label="mobile menu toggle"
		>
		  <div class="box" aria-hidden="true">
			<span class="line line1" aria-hidden="true"></span>
			<span class="line line2" aria-hidden="true"></span>
			<span class="line line3" aria-hidden="true"></span>
		  </div>
		</button>
		<div class="a-list-wrapper">
		  <ul id="cs-expanded" class="a-list">
			<li class="a-list__item">
				<a
				href="#about"
				class="link"
			  >
				Our Work
			  </a>
			</li>

			<li class="a-list__item">
			  <a
				href="#about"
			class="link"
			  >
				How It Works
			  </a>
			</li>
			<li class="a-list__item">
			  <a
				href="#work"
				class="link"
			  >
				About us
			  </a>
			</li>

		  </ul>
		</div>
		<a href="/contact" class="nav__cta">
		  Get Your Free Website
		</a>
	  </nav>
	</div>
  </header>

  <script>
	const header = document.querySelector(".header")
	const nav = document.querySelector(".nav")
	const mobileNavButton = document.querySelector(".toggle")

	header?.addEventListener("click", () => {
		header.classList.toggle("active")
	})
	nav?.addEventListener("click", () => {
		nav.classList.toggle("active")
	})
	mobileNavButton?.addEventListener("click", () => {
		mobileNavButton.classList.toggle("active")
	})
  </script>
<style lang="scss">

	/* Mobile - 1023px */
@media only screen and (max-width: 1023px) {
  // This allows the scrolling to happen
  // body {
  //   &.cs-open {
  //     overflow-y: hidden;
  //   }
  // }

  .header {
    width: 100%;
    padding: 12px 24px;
    /* prevents padding from affecting height and width */
    box-sizing: border-box;
    background-color: #fff;
    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
    position: sticky;
    top: 0;
    z-index: 10000;

    .dark-background {
      width: 100%;
      height: 0vh;
      background: rgba(0, 0, 0, 0.4);
      position: absolute;
      display: block;
      top: 100%;
      right: 0;
      z-index: -1000;
      opacity: 0;
      transition: opacity 0.5s;
    }

    // &:before {
    //   content: "";
    //   width: 100%;
    //   height: 0vh;
    //   background: rgba(0, 0, 0, 0.4);
    //   position: absolute;
    //   display: block;
    //   top: 100%;
    //   right: 0;
    //   z-index: -1000;
    //   opacity: 0;
    //   transition: opacity 0.5s;
    // }

    &.active {
      .dark-background {
        height: 100vh;
        opacity: 1;
      }
      &:before {
        height: 150vh;
        opacity: 1;
      }

      .link-list-wrapper {
        opacity: 1;
        transform: scaleY(1);
      }

      .link-list__item {
        transform: translateY(0);
        opacity: 1;
      }
    }

    &-container {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    &__logo {
      // width: 100%;
      max-width: 146px;
      height: 100%;
      margin: 0 auto 0 0;
      padding: 0;
      /* prevents padding from affecting height and width */
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;

      svg {
        width: 84px;
        fill: #000;
      }
    }

    .toggle {
      /* 44px - 48px */
      width: 48px;
      height: 48px;
      margin: 0 0 0 auto;
      border-radius: 4px;
      background-color: transparent;
      border: none;
      display: flex;
      justify-content: center;
      align-items: center;

      &:hover {
        cursor: pointer;
      }
    }

    // Hamburger Button animation
    .active {
      .line1 {
        top: 50%;
        transform: translate(-50%, -50%) rotate(225deg);
      }

      .line2 {
        top: 50%;
        transform-origin: center;
        transform: translate(-50%, -50%) translateY(0) rotate(-225deg);
      }

      .line3 {
        bottom: 100%;
        opacity: 0;
      }
    }

    .box {
      /* 24px - 28px */
      width: clamp(1.5rem, 2vw, 1.75rem);
      /* 14px - 16px */
      height: clamp(0.875rem, 1.5vw, 1rem);
      position: relative;
    }

    .line {
      width: 100%;
      height: 2px;
      border-radius: 2px;
      background-color: #1a1a1a;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
    }

    .line1 {
      top: 0;
      transform-origin: center;
      transition: transform 0.5s, top 0.3s, left 0.3s;
      animation-duration: 0.7s;
      animation-timing-function: ease;
      animation-fill-mode: forwards;
      animation-direction: normal;
    }

    .line2 {
      top: 50%;
      transform: translateX(-50%) translateY(-50%);
      transition: top 0.3s, left 0.3s, transform 0.5s;
      animation-duration: 0.7s;
      animation-timing-function: ease;
      animation-fill-mode: forwards;
      animation-direction: normal;
    }

    .line3 {
      bottom: 0;
      transition: bottom 0.3s, opacity 0.3s;
    }

    //***** Navigation links
    .link-list-wrapper {
      width: 100%;
      height: auto;
      padding-bottom: 48px;
      opacity: 0;
      background-color: #fff;
      box-shadow: inset rgba(0, 0, 0, 0.2) 0px 8px 24px;
      overflow: hidden;
      position: absolute;
      top: 100%;
      left: 0;
      z-index: -1;
      transform: scaleY(0);
      transform-origin: top;
      transition: transform 0.4s, opacity 0.2s;
    }

    .link-list {
      margin: 0;
      padding: 48px 0 0 0;
      width: 100%;
      height: auto;
      max-height: 65vh;
      overflow: scroll;
      display: flex;
      justify-content: flex-start;
      flex-direction: column;
      align-items: center;
      gap: 24px;
      overflow-x: hidden;
      overflow-y: hidden;
    }

    // Links
    .link-list__item {
      width: 100%;
      text-align: center;
      list-style: none;
      margin-right: 0;
      /* transition from these values */
      transform: translateY(-4.375rem);
      opacity: 0;
      transition: transform 0.6s, opacity 0.9s;

      &:nth-of-type(1) {
        transition-delay: 0.05s;
      }
      &:nth-of-type(2) {
        transition-delay: 0.1s;
      }
      &:nth-of-type(3) {
        transition-delay: 0.15s;
      }
      &:nth-of-type(4) {
        transition-delay: 0.2s;
      }
      &:nth-of-type(5) {
        transition-delay: 0.25s;
      }
      &:nth-of-type(6) {
        transition-delay: 0.3s;
      }
      &:nth-of-type(7) {
        transition-delay: 0.35s;
      }
      &:nth-of-type(8) {
        transition-delay: 0.4s;
      }
      &:nth-of-type(9) {
        transition-delay: 0.45s;
      }
    }

    .link {
      /* 16px - 24px */
      font-size: clamp(1rem, 2.5vw, 1.5rem);
      line-height: 1.2em;
      text-decoration: none;
      margin: 0;
      color: var(--headerColor);
      display: inline-block;
      position: relative;

      &:hover {
        &:before {
          width: 100%;
        }
      }

      &.active {
        &:before {
          width: 100%;
        }
      }

      &:before {
        /* active state underline */
        content: "";
        display: block;
        bottom: 0;
        left: 50%;
        width: 0%;
        height: 2px;
        background: #000;
        opacity: 1;
        position: absolute;
        transform: translateX(-50%);
        transition: width 0.2s;
      }
    }

    .nav__cta {
      display: none;
    }
  }
}

/* Tablet - 768px and up */
@media only screen and (min-width: 768px) {
  .header {
    padding: 16px 36px;
  }
}

/* Small Desktop - 1024px */
@media only screen and (min-width: 1024px) {
  .header {
    width: 100%;
    padding: 16px 36px;
    /* prevents padding from affecting height and width */
    box-sizing: border-box;
    background-color: #fff;
    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
    position: sticky;
    top: 0;
    z-index: 10000;

    &-container {
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      // gap: calc(24 / 16 * 1rem);
    }

    .cs-toggle {
      display: none;
    }

    &__logo {
      width: auto;

      svg {
        width: 100px;
        fill: #000;
      }
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 32px;
    }

    .link-list {
      width: 100%;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      /* 20px - 36px */
      gap: clamp(1.25rem, 2.6vw, 2.25rem);
    }

    .link-list__item {
      list-style: none;
      /* prevent flexbox from squishing it */
      flex: none;
    }

    .link {
      /* 14px - 16px */
      font-size: 16px;
      line-height: 1.5em;
      text-decoration: none;
      margin: 0;
      color: var(--color-text);
      display: block;
      position: relative;
      &:hover {
        &:before {
          width: 100%;
        }
      }

      &.active {
        &:before {
          width: 100%;
        }
      }

      &:before {
        /* active state underline */
        content: "";
        display: block;
        bottom: 0;
        left: 50%;
        width: 0%;
        height: 2px;
        background: #000;
        opacity: 1;
        position: absolute;
        transform: translateX(-50%);
        transition: width 0.2s;
      }
    }

    .nav__cta {
      line-height: 42px;
      text-decoration: none;
      font-weight: 700;
      font-size: 14px;
      text-align: center;
      text-transform: uppercase;
      margin: 0;

      min-width: 150px;
      padding: 0 24px;
      border: 2px solid black;
      border-radius: 4px;
      color: #fff;
      background-color: black;
      display: inline-block;
      position: relative;
      z-index: 1;
      box-sizing: border-box;
      transition: 0.2s color;

      &:before {
        content: "";
        position: absolute;
        height: 100%;
        width: 0%;
        background: var(--color-primary-light-2);
        opacity: 1;
        top: 0;
        left: 0;
        z-index: -1;
        border-radius: 8px;
        transition: width 0.3s, color 0.3s;
      }

      &:hover {
        &:before {
          width: 100%;
        }
        color: #fff;
      }
    }
  }
}

</style>
